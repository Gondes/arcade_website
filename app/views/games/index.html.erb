<h1>Games History</h1>

<% if !@games.empty? %>
  <div class="table-responsive">
    <table border="4" class="table table-striped table-condensed">
      <thead>
        <tr>
          <th>Game</th>
          <th>Finish Date</th>
          <th>Player 1</th>
          <th>Player 2</th>
          <th>Winner</th>
          <th>Best Of</th>
          <th colspan="1">Options</th>
        </tr>
      </thead>

      <tbody>
        <% @games.each do |game| %>
          <tr>
            <td><%= game.clean_name %></td>
            <td><%= game.end_date %></td>
            <td>Lvl-<%= game.player_1.level %> <%= link_to game.player_1.user_name, user_path(game.player_1.id) %></td>
            <td>Lvl-<%= game.player_2.level %> <%= link_to game.player_2.user_name, user_path(game.player_2.id) %></td>
            <td><%= game.winner_status %></td>
            <td><%= game.round_count %></td>

            <% if game.finished? %>   <!--Option Column-->
              <td><%= link_to 'Results', game %></td>
            <% elsif !game.accepted && game.player_2.id == current_user.id %>
              <td><%= link_to 'Accept', accept_game_path(game), method: :put %>/<%= link_to 'Reject', reject_game_path(game), method: :put, data: { confirm: 'Are you sure?' } %></td>
            <% elsif game.player_1.id == current_user.id || game.player_2.id == current_user.id %>
              <td><%= link_to 'Play', rock_paper_scissor_rounds_url(game_id: game.id) %></td>
            <% elsif current_user.admin %>
              <td><%= link_to 'Watch', rock_paper_scissor_rounds_url(game_id: game.id) %></td>
            <% else %>
              <td></td>
            <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
<% else %>
  <h2>There are no recorded games</h2>
<% end %>

<br>
